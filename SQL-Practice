üì¶ Project: database-test-suite

1Ô∏è‚É£ Folder Structure
database-test-suite/
‚îÇ
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ pytest.ini
‚îÇ
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ db_config.py
‚îÇ
‚îú‚îÄ‚îÄ sql/
‚îÇ   ‚îî‚îÄ‚îÄ test_queries.sql
‚îÇ
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ conftest.py
‚îÇ   ‚îú‚îÄ‚îÄ test_connection.py
‚îÇ   ‚îú‚îÄ‚îÄ test_data_integrity.py
‚îÇ   ‚îú‚îÄ‚îÄ test_security.py
‚îÇ   ‚îî‚îÄ‚îÄ test_performance.py
‚îÇ
‚îî‚îÄ‚îÄ .github/
    ‚îî‚îÄ‚îÄ workflows/
        ‚îî‚îÄ‚îÄ ci.yml

2Ô∏è‚É£ README.md (Recruiter-Optimized)
# Database Test Suite ‚Äì Advanced SQL Validation

This repository demonstrates a production-style SQL test automation framework designed for backend database validation and Software Quality Engineering.

## Objectives

- Validate data integrity and relational consistency
- Execute positive, negative, and boundary SQL tests
- Ensure security compliance (injection prevention)
- Monitor performance and query efficiency
- CI-ready automation

## Key Features

‚úî Connection validation and authentication  
‚úî CRUD and data integrity tests  
‚úî Referential integrity checks  
‚úî Edge-case and boundary testing  
‚úî SQL injection & security validation  
‚úî Performance and index validation  
‚úî Centralized configuration for DB connections  
‚úî CI/CD integration via GitHub Actions  

## Tech Stack

- Python 3.11+
- Pytest
- psycopg2 / SQLAlchemy
- PostgreSQL / MySQL (configurable)
- GitHub Actions (CI)

---

## Engineering Approach

- Centralized DB config and credentials management
- Reusable fixtures for connection/session handling
- Modular test structure for maintainability
- Structured assertions for clear failure messages
- Schema & data validation automation
- CI/CD ready

---

Designed to reflect **Senior Software Quality Engineer skills in database validation and automation**.

3Ô∏è‚É£ requirements.txt
pytest
psycopg2-binary
SQLAlchemy
python-dotenv

4Ô∏è‚É£ pytest.ini
[pytest]
addopts = -v --tb=short
testpaths = tests

5Ô∏è‚É£ config/db_config.py
import os

DB_TYPE = os.getenv("DB_TYPE", "postgresql")
DB_HOST = os.getenv("DB_HOST", "localhost")
DB_PORT = int(os.getenv("DB_PORT", 5432))
DB_NAME = os.getenv("DB_NAME", "orders_db")
DB_USER = os.getenv("DB_USER", "testuser")
DB_PASSWORD = os.getenv("DB_PASSWORD", "password123")

DB_URL = f"{DB_TYPE}://{DB_USER}:{DB_PASSWORD}@{DB_HOST}:{DB_PORT}/{DB_NAME}"

6Ô∏è‚É£ tests/conftest.py
import pytest
from sqlalchemy import create_engine
from config.db_config import DB_URL

@pytest.fixture(scope="session")
def db_engine():
    engine = create_engine(DB_URL)
    yield engine
    engine.dispose()

@pytest.fixture
def db_connection(db_engine):
    conn = db_engine.connect()
    yield conn
    conn.close()

7Ô∏è‚É£ tests/test_connection.py
def test_connection(db_connection):
    result = db_connection.execute("SELECT 1").scalar()
    assert result == 1

8Ô∏è‚É£ tests/test_data_integrity.py
def test_order_referential_integrity(db_connection):
    query = """
    SELECT o.id
    FROM orders o
    LEFT JOIN customers c ON o.customer_id = c.id
    WHERE c.id IS NULL
    """
    result = db_connection.execute(query).fetchall()
    assert len(result) == 0, "Found orders with missing customers"

def test_unique_order_ids(db_connection):
    query = """
    SELECT id, COUNT(*)
    FROM orders
    GROUP BY id
    HAVING COUNT(*) > 1
    """
    duplicates = db_connection.execute(query).fetchall()
    assert len(duplicates) == 0, "Duplicate order IDs found"

9Ô∏è‚É£ tests/test_security.py
def test_sql_injection_prevention(db_connection):
    malicious_input = "' OR '1'='1"
    query = f"SELECT * FROM orders WHERE customer_id = '{malicious_input}'"
    result = db_connection.execute(query).fetchall()
    assert len(result) == 0, "SQL injection vulnerability detected"

üîü tests/test_performance.py
import time

def test_order_query_performance(db_connection):
    query = "SELECT * FROM orders WHERE status='PENDING'"
    start = time.time()
    db_connection.execute(query).fetchall()
    duration = time.time() - start
    assert duration < 0.5, f"Query took too long: {duration}s"

1Ô∏è‚É£1Ô∏è‚É£ GitHub Actions CI (.github/workflows/ci.yml)
name: Database Test Suite

on:
  push:
    branches: [ main ]
  pull_request:

jobs:
  test:
    runs-on: ubuntu-latest

    services:
      postgres:
        image: postgres:15
        env:
          POSTGRES_DB: orders_db
          POSTGRES_USER: testuser
          POSTGRES_PASSWORD: password123
        ports:
          - 5432:5432
        options: >-
          --health-cmd pg_isready
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: |
          pip install -r requirements.txt
          pip install sqlalchemy psycopg2-binary

      - name: Run tests
        env:
          DB_HOST: localhost
          DB_PORT: 5432
          DB_NAME: orders_db
          DB_USER: testuser
          DB_PASSWORD: password123
        run: pytest
